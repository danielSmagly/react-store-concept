{"ast":null,"code":"import _regeneratorRuntime from\"/Users/danielsmagly/Desktop/ReactStoreConcept/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/danielsmagly/Desktop/ReactStoreConcept/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/danielsmagly/Desktop/ReactStoreConcept/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{commerce}from'./lib/commerce';import{Products,Navbar,Cart,Checkout}from'./components';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),order=_useState6[0],setOrder=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var fetchProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$commerce$produ,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return commerce.products.list();case 2:_yield$commerce$produ=_context.sent;data=_yield$commerce$produ.data;setProducts(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchProducts(){return _ref.apply(this,arguments);};}();var fetchCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=setCart;_context2.next=3;return commerce.cart.retrieve();case 3:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchCart(){return _ref2.apply(this,arguments);};}();var handleAddToCart=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(productId,quantity){var _yield$commerce$cart$,cart;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return commerce.cart.add(productId,quantity);case 2:_yield$commerce$cart$=_context3.sent;cart=_yield$commerce$cart$.cart;setCart(cart);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleAddToCart(_x,_x2){return _ref3.apply(this,arguments);};}();var handleUpdateCartQty=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(productId,quantity){var _yield$commerce$cart$2,cart;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return commerce.cart.update(productId,{quantity:quantity});case 2:_yield$commerce$cart$2=_context4.sent;cart=_yield$commerce$cart$2.cart;setCart(cart);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function handleUpdateCartQty(_x3,_x4){return _ref4.apply(this,arguments);};}();var handleRemoveFromCart=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(productId){var _yield$commerce$cart$3,cart;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return commerce.cart.remove(productId);case 2:_yield$commerce$cart$3=_context5.sent;cart=_yield$commerce$cart$3.cart;setCart(cart);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function handleRemoveFromCart(_x5){return _ref5.apply(this,arguments);};}();var handleEmptyCart=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _yield$commerce$cart$4,cart;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return commerce.cart.empty();case 2:_yield$commerce$cart$4=_context6.sent;cart=_yield$commerce$cart$4.cart;setCart(cart);case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function handleEmptyCart(){return _ref6.apply(this,arguments);};}();var refreshCart=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var newCart;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return commerce.cart.refresh();case 2:newCart=_context7.sent;setCart(newCart);case 4:case\"end\":return _context7.stop();}}},_callee7);}));return function refreshCart(){return _ref7.apply(this,arguments);};}();var handleCaptureCheckout=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(checkoutTokenId,newOrder){var incomingOrder;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return commerce.checkout.capture(checkoutTokenId,newOrder);case 3:incomingOrder=_context8.sent;setOrder(incomingOrder);refreshCart();_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](0);setErrorMessage(_context8.t0.data.error.message);case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[0,8]]);}));return function handleCaptureCheckout(_x6,_x7){return _ref8.apply(this,arguments);};}();useEffect(function(){fetchProducts();fetchCart();},[]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{totalItems:cart.total_items}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Products,{products:products,onAddToCart:handleAddToCart})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/cart\",children:/*#__PURE__*/_jsx(Cart,{cart:cart,handleUpdateCartQty:handleUpdateCartQty,handleRemoveFromCart:handleRemoveFromCart,handleEmptyCart:handleEmptyCart})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/checkout\",children:/*#__PURE__*/_jsx(Checkout,{cart:cart,order:order,onCaptureCheckout:handleCaptureCheckout,error:errorMessage})})]})]})});};export default App;","map":{"version":3,"sources":["/Users/danielsmagly/Desktop/ReactStoreConcept/src/App.js"],"names":["React","useState","useEffect","commerce","Products","Navbar","Cart","Checkout","BrowserRouter","Router","Switch","Route","App","products","setProducts","cart","setCart","order","setOrder","errorMessage","setErrorMessage","fetchProducts","list","data","fetchCart","retrieve","handleAddToCart","productId","quantity","add","handleUpdateCartQty","update","handleRemoveFromCart","remove","handleEmptyCart","empty","refreshCart","refresh","newCart","handleCaptureCheckout","checkoutTokenId","newOrder","checkout","capture","incomingOrder","error","message","total_items"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport { commerce } from './lib/commerce'\n\nimport {Products, Navbar, Cart, Checkout} from './components'\n\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\n\n\n\n \nconst App = () => {\n\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState({});\n  const [order, setOrder] = useState({});\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const fetchProducts = async () => {\n      const {data} = await commerce.products.list();\n\n      setProducts(data);\n  }\n\n  const fetchCart = async () => {\n\n    setCart(await commerce.cart.retrieve());\n  }\n\n  const handleAddToCart = async (productId, quantity) => {\n      const {cart} = await commerce.cart.add(productId, quantity);\n\n      setCart(cart);\n  }\n\n  const handleUpdateCartQty = async (productId, quantity) => {\n    const {cart} = await commerce.cart.update(productId, {quantity});\n\n    setCart(cart);\n  }\n\n  const handleRemoveFromCart = async (productId) => {\n    const {cart } = await commerce.cart.remove(productId);\n\n    setCart(cart);\n  }\n\n  const handleEmptyCart = async () => {\n    const {cart} = await commerce.cart.empty();\n\n    setCart(cart);\n  }\n\n  const refreshCart = async () => {\n    const newCart = await commerce.cart.refresh();\n\n    setCart(newCart);\n  }\n\n  const handleCaptureCheckout = async (checkoutTokenId, newOrder ) => {\n      try {\n        const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\n\n        setOrder(incomingOrder);\n        refreshCart()\n        \n      } catch (error) {\n        setErrorMessage(error.data.error.message);\n        \n      }\n  }\n\n\n  useEffect(() => {\n      fetchProducts();\n      fetchCart();\n  }, []);\n  return (\n      \n    <Router>\n        <div>\n        <Navbar totalItems={cart.total_items}/>\n        <Switch>\n          <Route exact path=\"/\">\n            <Products products={products} onAddToCart={handleAddToCart}/>\n          </Route>\n          <Route exact path=\"/cart\">\n            <Cart \n              cart={cart}\n              handleUpdateCartQty={handleUpdateCartQty}\n              handleRemoveFromCart={handleRemoveFromCart}\n              handleEmptyCart={handleEmptyCart}\n            />\n          </Route>\n          <Route exact path='/checkout'>\n              <Checkout cart={cart} order={order} onCaptureCheckout={handleCaptureCheckout} error={errorMessage}\n              />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n      \n      \n    \n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}